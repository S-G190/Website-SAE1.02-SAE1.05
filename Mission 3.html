<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Présentation de la base de données KDou</title>
    <link href="Assets/CSS/style.css" type="text/css" rel="stylesheet">
</head>
<body>
<nav>
    <div class="logo">Rapport KDou</div>

    <!-- Le bouton burger -->
    <input type="checkbox" id="menu-toggle">
    <label for="menu-toggle" id="burger">
        <span></span>
        <span></span>
        <span></span>
    </label>
    <div class="nav-links">
        <a href="index.html">Présentation</a>
        <a href="Mission%201.html">Mission 1</a>
        <a href="Mission%202.html">Mission 2</a>
        <a href="Mission%203.html">Mission 3</a>
        <a href="Requêtes.html">Requêtes</a>
        <a href="Conclusion.html">Conclusion</a>
    </div>
</nav>
<h1>Mission 3</h1>


<p class="boite-texte">La troisième mission, enfin, a exploité la nouvelle version enrichie de la base de données pour produire des indicateurs de gestion pertinents : marges, coûts, relations entre clients, regroupements de livraisons ou encore analyse des fournisseurs par pays.</p>
<h2> Indicateur (Réponses aux questions) </h2>
<section class="requêtes">
    <div class="requête">
        <div class="titre">Indicateur 1 : Chiffre d’affaires par catégorie (Boissons et Desserts)</div>
        <p>On souhaite connaître le chiffre d’affaires généré par les catégories Boissons et Desserts de 2020 à 2022. Cela permet de suivre l’évolution des ventes et d’identifier les catégories les plus rentables.</p>
        <div class="extrait-sql"><p>SELECT CCUR(SUM(C.CoefMarge * P.CoutAchat * DC.Quantité * (1-DC.[Remise (%)]))) AS ChiffreAff,
            YEAR(Co.DateCde) AS Annee
            FROM ((Categorie AS C
            INNER JOIN Produit AS P ON C.CodeCateg = P.CodeCateg)
            INNER JOIN DetailCommande AS DC ON P.RefProd = DC.[Réf produit])
            INNER JOIN Commande AS Co ON DC.[N° commande] = Co.[N° commande]
            WHERE C.NomCateg = "Boissons" OR C.NomCateg = "Desserts"
            GROUP BY YEAR(Co.DateCde);
        </p></div>
        <img class="img-requête" src="Assets/Images/M3REF1.png" alt="résultat-sql">

    </div>
    <div class="requête">
        <div class="titre">Indicateur 2 : Produits carnés non commandés</div>
        <p>Identifier les produits de viande qui n’ont jamais été commandés. Utile pour gérer le stock, identifier les invendus et optimiser l’assortiment.</p>
        <div class="extrait-sql"><p>SELECT COUNT(*) AS NbProduit
            FROM (Produit AS P
            LEFT JOIN DetailCommande AS DC ON DC.[Réf produit] = P.RefProd)
            LEFT JOIN Categorie AS C ON C.CodeCateg = P.CodeCateg
            WHERE C.NomCateg = 'Viandes'
            AND P.RefProd NOT IN (
            SELECT DISTINCT DC.[Réf produit]
            FROM DetailCommande AS DC
            );
        </p></div>
        <img class="img-requête" src="Assets/Images/M3REF2.png" alt="résultat-sql">
    </div>
    <div class="requête">
        <div class="titre">Indicateur 3 : Produits importés des États-Unis à faible coût</div>
        <p>Calculer le CA généré par les fournisseurs situés hors Union Européenne. Cela permet d’évaluer l’impact des fournisseurs internationaux sur les ventes.</p>
        <div class="extrait-sql"><p>SELECT SUM(DC.Quantité * P.CoutAchat) AS CAhorsUE
            FROM ((Produit AS P
            INNER JOIN Fournisseur AS F ON F.NoFour = P.NoFour)
            INNER JOIN DetailCommande AS DC ON DC.[Réf produit] = P.RefProd)
            INNER JOIN Pays ON F.NoPays = Pays.NoPays
            WHERE Pays.UE = "Hors";
            LEFT JOIN (SELECT Commande.CodeCli, COUNT([N° commande]) AS NbrCommandesTotales
            FROM Commande
            GROUP BY Commande.CodeCli) AS CommandeClientPiloteTot ON pilote.CodeCli = CommandeClientPiloteTot.CodeCli
            WHERE partenaire.CodeCliPart IS NOT NULL
            AND CommandeClientPartenaireTot.NbrCommandesTotales = CommandeClientPiloteTot.NbrCommandesTotales;

        </p></div>
        <img class="img-requête" src="Assets/Images/M3REF3.png" alt="résultat-sql">
    </div>
    <div class="requête">
        <div class="titre">Indicateur 4 : Comparaison commandes partenaires et sociétés pilotes</div>
        <p>Comparer le nombre de commandes entre une société partenaire et sa société pilote pour vérifier la cohérence et l’activité commerciale.</p>
        <div class="extrait-sql"><p>SELECT partenaire.CodeCli AS CodePartenaire, partenaire.Societe AS NomPartenaire,
            CommandeClientPartenaireTot.NbrCommandesTotales AS NbrCommandePartenaire,
            pilote.CodeCli AS CodePilote, pilote.Societe AS NomPilote,
            CommandeClientPiloteTot.NbrCommandesTotales AS NbrCommandePilote
            FROM ((Clientele AS partenaire
            INNER JOIN Clientele AS pilote ON partenaire.CodeCliPart = pilote.CodeCli)
            LEFT JOIN (SELECT Commande.CodeCli, COUNT([N° commande]) AS NbrCommandesTotales
            FROM Commande
            GROUP BY Commande.CodeCli) AS CommandeClientPartenaireTot ON partenaire.CodeCli = CommandeClientPartenaireTot.CodeCli)
            LEFT JOIN (SELECT Commande.CodeCli, COUNT([N° commande]) AS NbrCommandesTotales
            FROM Commande
            GROUP BY Commande.CodeCli) AS CommandeClientPiloteTot ON pilote.CodeCli = CommandeClientPiloteTot.CodeCli
            WHERE partenaire.CodeCliPart IS NOT NULL
            AND CommandeClientPartenaireTot.NbrCommandesTotales = CommandeClientPiloteTot.NbrCommandesTotales;

        </p></div>
        <img class="img-requête" src="Assets/Images/M3REF4.png" alt="résultat-sql">
    </div>
</section>


<footer>
    <p>&copy; 2025 Rapport KDou. Tous droits réservés.</p>
    <p>Fait pour la SAE 1.02 | SAE 1.05</p>
</footer>
</body>
</html>